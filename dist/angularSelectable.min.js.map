{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///angularSelectable.min.js","webpack:///webpack/bootstrap eb13960298927cb0fbe6","webpack:///./src/index.js","webpack:///./src/services/Selectable.js","webpack:///./src/directives/selectable.js","webpack:///./src/directives/selectableItem.js","webpack:///./src/directives/selectableIgnore.js","webpack:///./src/directives/selectableHotkey.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequire","obj","__esModule","Selectable","directiveSelectable","directiveSelectableItem","directiveSelectableIgnore","directiveSelectableHotkey","angular","service","directive","_slicedToArray","arr","i","Array","isArray","Symbol","iterator","Object","_step","_arr","_iterator","next","done","push","value","length","TypeError","_createClass","defineProperties","target","props","key","prop","configurable","writable","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","$document","listen","on","_private","events","keyDown","addListener","fn","calbacks","update","selected","methods","rectReset","getRect","css","top","left","width","height","changeState","elements","state","checkObjects","selectSelecting","cache","filter","child","scope","isSelecting","isSelected","event","ctrlKey","metaKey","$apply","freeze","set","data","get","rectEndPoint","rect","end","x","y","rectUpdate","rectStartPoint","start","defaultZone","zone","getSelectableElements","lastSelect","element","modifiers","keyCode","A","ESC","rectCreate","addClass","find","eq","append","elenemt","getRectCoord","_private$data$rect","temp","_ref","_ref2","_ref3","_ref32","_private$methods$getRectCoord","offset","doc","ownerDocument","documentElem","documentElement","box","getBoundingClientRect","window","pageYOffset","scrollTop","clientTop","pageXOffset","scrollLeft","clientLeft","undefined","arguments","forEach","k","checkHit","object","hel","objectOffset","out","slice","children","isSelectable","unSelect","$id","isSelectableZone","concat","hit","formTarget","preventDefault","$inject","restrict","link","attributes","mousemove","pageX","pageY","mouseup","off","document","activeElement","blur","parent","stopPropagation"],"mappings":"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","file":"angularSelectable.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"angularSelectable\"] = factory();\n\telse\n\t\troot[\"angularSelectable\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"angularSelectable\"] = factory();\n\telse\n\t\troot[\"angularSelectable\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\n\tvar Selectable = _interopRequire(__webpack_require__(1));\n\n\tvar directiveSelectable = _interopRequire(__webpack_require__(2));\n\n\tvar directiveSelectableItem = _interopRequire(__webpack_require__(3));\n\n\tvar directiveSelectableIgnore = _interopRequire(__webpack_require__(4));\n\n\tvar directiveSelectableHotkey = _interopRequire(__webpack_require__(5));\n\n\tangular.module(\"angularSelectable\", []).service(\"Selectable\", Selectable).directive(\"selectable\", directiveSelectable).directive(\"selectableItem\", directiveSelectableItem).directive(\"selectableIgnore\", directiveSelectableIgnore).directive(\"selectableHotkey\", directiveSelectableHotkey);\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\n\tvar _slicedToArray = function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { var _arr = []; for (var _iterator = arr[Symbol.iterator](), _step; !(_step = _iterator.next()).done;) { _arr.push(_step.value); if (i && _arr.length === i) break; } return _arr; } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } };\n\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\n\tmodule.exports = function ($document) {\n\t\tvar Selectable = (function () {\n\t\t\tfunction Selectable() {\n\t\t\t\t_classCallCheck(this, Selectable);\n\n\t\t\t\tthis.listen();\n\t\t\t}\n\n\t\t\t_createClass(Selectable, {\n\t\t\t\tlisten: {\n\t\t\t\t\tvalue: function listen() {\n\n\t\t\t\t\t\t$document.on(\"keydown\", _private.events.keyDown);\n\n\t\t\t\t\t\treturn this;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\taddListener: {\n\n\t\t\t\t\t/**\n\t     * Устанавливает слушателя обновлений\n\t     *\n\t     * @param {String} key - namespace\n\t     * @param {Function} fn - callback\n\t     */\n\n\t\t\t\t\tvalue: function addListener(key, fn) {\n\n\t\t\t\t\t\tif (typeof fn === \"function\") _private.calbacks[key] = fn;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tupdate: {\n\n\t\t\t\t\t/**\n\t     * Обновляет выбранные объекты\n\t     *\n\t     * @param {Array} selected - массив выбранных объектов\n\t     */\n\n\t\t\t\t\tvalue: function update(selected) {\n\n\t\t\t\t\t\t_private.methods.update(selected);\n\n\t\t\t\t\t\treturn this;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trectReset: {\n\n\t\t\t\t\t/**\n\t     * Сбрасывает положение\n\t     *\n\t     * @return {Object}\n\t     */\n\n\t\t\t\t\tvalue: function rectReset() {\n\n\t\t\t\t\t\t_private.methods.getRect().css({ top: \"-2px\", left: \"-2px\", width: 0, height: 0 });\n\n\t\t\t\t\t\treturn this;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tchangeState: {\n\n\t\t\t\t\t/**\n\t     * Обновляет состояния у элементов\n\t     *\n\t     * @param elements\n\t     * @param state\n\t     * @param update\n\t     * @returns {Selectable}\n\t     */\n\n\t\t\t\t\tvalue: function changeState(elements, state, update) {\n\n\t\t\t\t\t\t_private.methods.changeState(elements, state, update);\n\n\t\t\t\t\t\treturn this;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcheckObjects: {\n\n\t\t\t\t\t/**\n\t     * Проверяет объекты на выделение\n\t     *\n\t     * @returns {Selectable}\n\t     */\n\n\t\t\t\t\tvalue: function checkObjects() {\n\n\t\t\t\t\t\t_private.methods.checkObjects();\n\n\t\t\t\t\t\treturn this;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tselectSelecting: {\n\n\t\t\t\t\t/**\n\t     * Выбирает выделение объекты\n\t     *\n\t     * @returns {Selectable}\n\t     */\n\n\t\t\t\t\tvalue: function selectSelecting() {\n\n\t\t\t\t\t\tvar selected = _private.cache.filter(function (child, scope) {\n\n\t\t\t\t\t\t\tscope = child.scope();\n\n\t\t\t\t\t\t\tif (scope.isSelecting) {\n\n\t\t\t\t\t\t\t\tscope.isSelecting = false;\n\t\t\t\t\t\t\t\tscope.isSelected = event.ctrlKey || event.metaKey ? !scope.isSelected : true;\n\t\t\t\t\t\t\t\tscope.$apply();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn scope.isSelected;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t_private.methods.update(selected);\n\n\t\t\t\t\t\treturn this;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfreeze: {\n\n\t\t\t\t\t/**\n\t     * Устанавливает состояние selectable\n\t     */\n\n\t\t\t\t\tset: function (state) {\n\n\t\t\t\t\t\t_private.data.freeze = state;\n\t\t\t\t\t},\n\n\t\t\t\t\t/**\n\t     * Получает состояние selectable\n\t     */\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn _private.data.freeze;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trectEndPoint: {\n\n\t\t\t\t\t/**\n\t     * Устанавливает конечные координаты хелпера\n\t     */\n\n\t\t\t\t\tset: function (c) {\n\n\t\t\t\t\t\t_private.data.rect.end = { x: c.x, y: c.y };\n\n\t\t\t\t\t\t_private.methods.rectUpdate();\n\n\t\t\t\t\t\t_private.methods.checkObjects();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trectStartPoint: {\n\n\t\t\t\t\t/**\n\t     * Устанавливает начальные координаты хелпера\n\t     */\n\n\t\t\t\t\tset: function (c) {\n\n\t\t\t\t\t\t_private.data.rect.start = { x: c.x, y: c.y };\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdefaultZone: {\n\n\t\t\t\t\t/**\n\t     * Устанавливает по умолчанию зону выделения\n\t     * для работы с hot keys\n\t     * @param zone\n\t     */\n\n\t\t\t\t\tset: function (zone) {\n\n\t\t\t\t\t\t_private.data.defaultZone = zone;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tzone: {\n\n\t\t\t\t\t/**\n\t     * Кэширует элементы в зоне\n\t     * @param zone\n\t     */\n\n\t\t\t\t\tset: function (zone) {\n\n\t\t\t\t\t\t_private.cache = _private.methods.getSelectableElements(zone);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tselected: {\n\n\t\t\t\t\t/**\n\t     * Получает массив выбранных объектов\n\t     */\n\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn _private.cache.filter(function (child) {\n\t\t\t\t\t\t\treturn child.scope().isSelected;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn Selectable;\n\t\t})();\n\n\t\tvar _private = {\n\n\t\t\t// Объект для хнанения функций callback при выделении элементов;\n\t\t\tcalbacks: {},\n\n\t\t\t// Кэш элементов в хоне выделения\n\t\t\tcache: [],\n\n\t\t\t// Данные\n\t\t\tdata: {\n\n\t\t\t\t// Замороженние состояние\n\t\t\t\tfreeze: false,\n\n\t\t\t\t// Зона по умолчанию, для hot keys\n\t\t\t\tdefaultZone: null,\n\n\t\t\t\t// Последний выбранный элемент, для hot key Shift\n\t\t\t\t// TODO сделать обработку кнопки shift;\n\t\t\t\tlastSelect: null,\n\n\t\t\t\t// Объект выделения\n\t\t\t\trect: {\n\t\t\t\t\telement: null,\n\t\t\t\t\tstart: {},\n\t\t\t\t\tend: {}\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\t// Модиффикаторы\n\t\t\tmodifiers: {\n\t\t\t\trect: \"ng-selectable__helper\"\n\t\t\t},\n\n\t\t\t// Коды горячих кнопок\n\t\t\tkeyCode: {\n\t\t\t\tA: 65,\n\t\t\t\tESC: 27\n\t\t\t},\n\n\t\t\t/**\n\t   *  Приватные методы\n\t   */\n\t\t\tmethods: {\n\n\t\t\t\t/*\n\t    * Создает элемент выделения\n\t    */\n\t\t\t\trectCreate: function () {\n\n\t\t\t\t\tvar element = angular.element(\"<div/>\").addClass(_private.modifiers.rect);\n\n\t\t\t\t\t$document.find(\"body\").eq(0).append(element);\n\n\t\t\t\t\treturn element;\n\t\t\t\t},\n\n\t\t\t\t/*\n\t    * Получает элемент выделения\n\t    */\n\t\t\t\tgetRect: function () {\n\t\t\t\t\treturn _private.data.rect.elenemt || (_private.data.rect.elenemt = _private.methods.rectCreate());\n\t\t\t\t},\n\n\t\t\t\t/*\n\t    * Получает координаты элемент выделения\n\t    */\n\t\t\t\tgetRectCoord: function () {\n\t\t\t\t\tvar _private$data$rect = _private.data.rect;\n\t\t\t\t\tvar end = _private$data$rect.end;\n\t\t\t\t\tvar start = _private$data$rect.start;\n\t\t\t\t\tvar temp = {\n\t\t\t\t\t\tend: { x: end.x, y: end.y },\n\t\t\t\t\t\tstart: { x: start.x, y: start.y }\n\t\t\t\t\t};\n\n\t\t\t\t\tif (start.x > end.x) {\n\t\t\t\t\t\tvar _ref = [start.x, end.x];\n\n\t\t\t\t\t\tvar _ref2 = _slicedToArray(_ref, 2);\n\n\t\t\t\t\t\ttemp.end.x = _ref2[0];\n\t\t\t\t\t\ttemp.start.x = _ref2[1];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (start.y > end.y) {\n\t\t\t\t\t\tvar _ref3 = [start.y, end.y];\n\n\t\t\t\t\t\tvar _ref32 = _slicedToArray(_ref3, 2);\n\n\t\t\t\t\t\ttemp.end.y = _ref32[0];\n\t\t\t\t\t\ttemp.start.y = _ref32[1];\n\t\t\t\t\t}\n\n\t\t\t\t\treturn temp;\n\t\t\t\t},\n\n\t\t\t\t/*\n\t    * Обновляет положение хелпера\n\t    */\n\t\t\t\trectUpdate: function () {\n\t\t\t\t\tvar _private$methods$getRectCoord = _private.methods.getRectCoord();\n\n\t\t\t\t\tvar start = _private$methods$getRectCoord.start;\n\t\t\t\t\tvar end = _private$methods$getRectCoord.end;\n\n\t\t\t\t\t_private.methods.getRect().css({\n\t\t\t\t\t\ttop: start.y + \"px\",\n\t\t\t\t\t\tleft: start.x + \"px\",\n\t\t\t\t\t\twidth: end.x - start.x + \"px\",\n\t\t\t\t\t\theight: end.y - start.y + \"px\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\t/*\n\t    * Получает положение объекта\n\t    *\n\t    * @param element\n\t    * @returns {{top: number, left: number}}\n\t    */\n\t\t\t\toffset: function (element) {\n\n\t\t\t\t\tvar doc = element && element.ownerDocument,\n\t\t\t\t\t    documentElem = doc.documentElement,\n\t\t\t\t\t    box = element.getBoundingClientRect ? element.getBoundingClientRect() : { top: 0, left: 0 };\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttop: box.top + (window.pageYOffset || documentElem.scrollTop) - (documentElem.clientTop || 0),\n\t\t\t\t\t\tleft: box.left + (window.pageXOffset || documentElem.scrollLeft) - (documentElem.clientLeft || 0)\n\t\t\t\t\t};\n\t\t\t\t},\n\n\t\t\t\t/*\n\t    * Обновляет состояние элементов\n\t    */\n\t\t\t\tchangeState: function () {\n\t\t\t\t\tvar elements = arguments[0] === undefined ? [] : arguments[0];\n\t\t\t\t\tvar state = arguments[1] === undefined ? false : arguments[1];\n\t\t\t\t\tvar update = arguments[2] === undefined ? false : arguments[2];\n\n\t\t\t\t\telements = elements === \"all\" ? _private.cache : elements;\n\n\t\t\t\t\telements.forEach(function (child, scope) {\n\n\t\t\t\t\t\tscope = child.scope();\n\n\t\t\t\t\t\tif (scope.isSelected != state) {\n\t\t\t\t\t\t\tscope.isSelecting = false;\n\t\t\t\t\t\t\tscope.isSelected = state;\n\t\t\t\t\t\t\tscope.$apply();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tif (update) {\n\n\t\t\t\t\t\t_private.methods.update(state ? _private.cache : []);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t/*\n\t    * Вызывает все подписанные callbacks на обновления\n\t    */\n\t\t\t\tupdate: function (selected) {\n\n\t\t\t\t\tfor (var k in _private.calbacks) {\n\t\t\t\t\t\t_private.calbacks[k](selected);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t/*\n\t    * Проверяет попадание объекта в область выделения\n\t    *\n\t    * @param {Object} object\n\t    * @returns {Boolean}\n\t    */\n\t\t\t\tcheckHit: function (object) {\n\n\t\t\t\t\tvar hel = _private.methods.getRectCoord(),\n\t\t\t\t\t    objectOffset = _private.methods.offset(object[0]),\n\t\t\t\t\t    obj = {\n\t\t\t\t\t\tstart: {\n\t\t\t\t\t\t\tx: objectOffset.left,\n\t\t\t\t\t\t\ty: objectOffset.top\n\t\t\t\t\t\t},\n\t\t\t\t\t\tend: {\n\t\t\t\t\t\t\tx: objectOffset.left + object.prop(\"offsetWidth\"),\n\t\t\t\t\t\t\ty: objectOffset.top + object.prop(\"offsetHeight\")\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\treturn (hel.start.x <= obj.start.x && obj.start.x <= hel.end.x || obj.start.x <= hel.start.x && hel.start.x <= obj.end.x) && (hel.start.y <= obj.start.y && obj.start.y <= hel.end.y || obj.start.y <= hel.start.y && hel.start.y <= obj.end.y);\n\t\t\t\t},\n\n\t\t\t\tgetSelectableElements: function (element) {\n\n\t\t\t\t\tvar out = [];\n\n\t\t\t\t\tArray.prototype.slice.call(element.children()).filter(function (child, scope) {\n\n\t\t\t\t\t\tchild = angular.element(child);\n\t\t\t\t\t\tscope = child.scope();\n\n\t\t\t\t\t\tif (scope.isSelectable) {\n\t\t\t\t\t\t\tscope.unSelect = false;\n\t\t\t\t\t\t\tout.push(child);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t//TODO переписать\n\t\t\t\t\t\t\tif (scope.$id != element.scope().$id && scope.isSelectableZone === true) {} else out = out.concat(_private.methods.getSelectableElements(child));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\treturn out;\n\t\t\t\t},\n\n\t\t\t\tcheckObjects: function () {\n\n\t\t\t\t\t_private.cache.forEach(function (child, scope) {\n\n\t\t\t\t\t\tvar hit = _private.methods.checkHit(child);\n\t\t\t\t\t\tscope = child.scope();\n\n\t\t\t\t\t\tif (hit && scope.isSelected) {\n\n\t\t\t\t\t\t\tscope.isSelected = false;\n\t\t\t\t\t\t\tscope.isSelecting = false;\n\t\t\t\t\t\t\tscope.unSelect = true;\n\t\t\t\t\t\t\tscope.$apply();\n\t\t\t\t\t\t} else if (hit && !scope.unSelect) {\n\n\t\t\t\t\t\t\tif (!scope.isSelecting) {\n\t\t\t\t\t\t\t\tscope.isSelecting = true;\n\t\t\t\t\t\t\t\tscope.$apply();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (!hit && scope.unSelect) {\n\n\t\t\t\t\t\t\tscope.unSelect = false;\n\t\t\t\t\t\t\tscope.isSelected = true;\n\t\t\t\t\t\t\tscope.$apply();\n\t\t\t\t\t\t} else if (scope.isSelecting) {\n\n\t\t\t\t\t\t\tscope.isSelecting = false;\n\t\t\t\t\t\t\tscope.$apply();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\t/**\n\t   * Обработка событий\n\t   */\n\t\t\tevents: {\n\n\t\t\t\tkeyDown: function (event) {\n\n\t\t\t\t\t// Если не существует зона по умолчанию или фокус на элементе формы, то отменяем;\n\t\t\t\t\tif (!_private.data.defaultZone || event.target.formTarget != undefined) return;\n\n\t\t\t\t\t_private.cache = _private.methods.getSelectableElements(_private.data.defaultZone);\n\n\t\t\t\t\tif (!_private.cache.length) return;\n\n\t\t\t\t\tif (event.keyCode === _private.keyCode.ESC) {\n\n\t\t\t\t\t\t_private.methods.changeState(\"all\", false, true);\n\n\t\t\t\t\t\treturn event.preventDefault();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (event.keyCode === _private.keyCode.A && (event.ctrlKey || event.metaKey)) {\n\n\t\t\t\t\t\t_private.methods.changeState(\"all\", true, true);\n\n\t\t\t\t\t\treturn event.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\treturn new Selectable();\n\t};\n\n\tmodule.exports.$inject = [\"$document\"];\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\n\tmodule.exports = function ($document, Selectable) {\n\n\t\treturn {\n\n\t\t\tscope: true,\n\t\t\trestrict: \"A\",\n\t\t\tlink: function (scope, element, attributes) {\n\n\t\t\t\tscope.isSelectableZone = true;\n\n\t\t\t\t/**\n\t    * Method on Mouse Move\n\t    * @param  {Event} event\n\t    */\n\t\t\t\tfunction mousemove(event) {\n\n\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\tSelectable.rectEndPoint = { x: event.pageX, y: event.pageY };\n\t\t\t\t}\n\n\t\t\t\t/**\n\t    * Event on Mouse up\n\t    * @param  {Event} event\n\t    */\n\t\t\t\tfunction mouseup(event) {\n\n\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\tSelectable.selectSelecting().rectReset();\n\n\t\t\t\t\t// Remove listeners\n\t\t\t\t\t$document.off(\"mousemove\", mousemove);\n\t\t\t\t\t$document.off(\"mouseup\", mouseup);\n\t\t\t\t}\n\n\t\t\t\telement.on(\"mousedown\", function (event) {\n\n\t\t\t\t\tif (Selectable.freeze == \"one\") Selectable.freeze = false;else if (!Selectable.freeze && event.target.formTarget == undefined) {\n\n\t\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\t\tSelectable.zone = element;\n\n\t\t\t\t\t\tif (!(event.ctrlKey || event.metaKey)) Selectable.changeState(\"all\", false, false);\n\n\t\t\t\t\t\t// Update start coordinates\n\t\t\t\t\t\tSelectable.rectStartPoint = { x: event.pageX, y: event.pageY };\n\n\t\t\t\t\t\t// Set events\n\t\t\t\t\t\t$document.on(\"mousemove\", mousemove);\n\t\t\t\t\t\t$document.on(\"mouseup\", mouseup);\n\n\t\t\t\t\t\tdocument.activeElement && document.activeElement.blur();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t};\n\n\tmodule.exports.$inject = [\"$document\", \"Selectable\"];\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\n\tmodule.exports = function (Selectable) {\n\n\t\treturn {\n\n\t\t\tscope: true,\n\t\t\trestrict: \"A\",\n\t\t\tlink: function (scope, element, attributes) {\n\n\t\t\t\tscope.isSelectable = true;\n\t\t\t\tscope.isSelecting = false;\n\t\t\t\tscope.isSelected = false;\n\n\t\t\t\telement.on(\"mousedown\", function (event) {\n\n\t\t\t\t\tif (event.target.formTarget != undefined) return;\n\n\t\t\t\t\tSelectable.zone = element.parent();\n\n\t\t\t\t\tif (!event.ctrlKey && !event.metaKey) Selectable.changeState(\"all\", false, false);\n\n\t\t\t\t\telement.scope().isSelected = !element.scope().isSelected;\n\t\t\t\t\telement.scope().$apply();\n\n\t\t\t\t\tSelectable.update(Selectable.selected);\n\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t};\n\n\tmodule.exports.$inject = [\"Selectable\"];\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\n\tmodule.exports = function (Selectable) {\n\n\t\treturn {\n\n\t\t\tlink: function (scope, element, attributes) {\n\n\t\t\t\telement.on(\"mousedown\", function () {\n\t\t\t\t\treturn Selectable.freeze = \"one\";\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t};\n\n\tmodule.exports.$inject = [\"Selectable\"];\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\n\tmodule.exports = function (Selectable) {\n\n\t\treturn {\n\n\t\t\tlink: function (scope, element, attributes) {\n\t\t\t\treturn Selectable.defaultZone = element;\n\t\t\t}\n\n\t\t};\n\t};\n\n\tmodule.exports.$inject = [\"Selectable\"];\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** angularSelectable.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap eb13960298927cb0fbe6\n **/","'use strict';\n\nimport Selectable from './services/Selectable';\n\nimport directiveSelectable from './directives/selectable';\nimport directiveSelectableItem from './directives/selectableItem';\nimport directiveSelectableIgnore from './directives/selectableIgnore';\nimport directiveSelectableHotkey from './directives/selectableHotkey';\n\n\nangular\n    .module('angularSelectable', [])\n    .service('Selectable', Selectable)\n    .directive('selectable', directiveSelectable)\n    .directive('selectableItem', directiveSelectableItem)\n    .directive('selectableIgnore', directiveSelectableIgnore)\n    .directive('selectableHotkey', directiveSelectableHotkey);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","'use strict';\n\n\nexport default $document => {\n\n\n\tclass Selectable {\n\n\n\t\tconstructor() {\n\n\t\t\tthis.listen();\n\n\t\t}\n\n\n\t\tlisten() {\n\n\t\t\t$document.on('keydown', _private.events.keyDown);\n\n\t\t\treturn this;\n\n\t\t}\n\n\n\t\t/**\n\t\t * Устанавливает слушателя обновлений\n\t\t *\n\t\t * @param {String} key - namespace\n\t\t * @param {Function} fn - callback\n\t\t */\n\t\taddListener(key, fn) {\n\n\t\t\tif (typeof fn === 'function') _private.calbacks[key] = fn;\n\n\t\t}\n\n\n\t\t/**\n\t\t * Обновляет выбранные объекты\n\t\t *\n\t\t * @param {Array} selected - массив выбранных объектов\n\t\t */\n\t\tupdate(selected) {\n\n\t\t\t_private.methods.update(selected);\n\n\t\t\treturn this;\n\n\t\t}\n\n\n\t\t/**\n\t\t * Сбрасывает положение\n\t\t *\n\t\t * @return {Object}\n\t\t */\n\t\trectReset() {\n\n\t\t\t_private.methods.getRect().css({top: '-2px', left: '-2px', width: 0, height: 0});\n\n\t\t\treturn this;\n\n\t\t}\n\n\n\t\t/**\n\t\t * Обновляет состояния у элементов\n\t\t *\n\t\t * @param elements\n\t\t * @param state\n\t\t * @param update\n\t\t * @returns {Selectable}\n\t\t */\n\t\tchangeState(elements, state, update) {\n\n\t\t\t_private.methods.changeState(elements, state, update);\n\n\t\t\treturn this;\n\n\t\t}\n\n\n\t\t/**\n\t\t * Проверяет объекты на выделение\n\t\t *\n\t\t * @returns {Selectable}\n\t\t */\n\t\tcheckObjects() {\n\n\t\t\t_private.methods.checkObjects();\n\n\t\t\treturn this;\n\n\t\t}\n\n\n\t\t/**\n\t\t * Выбирает выделение объекты\n\t\t *\n\t\t * @returns {Selectable}\n\t\t */\n\t\tselectSelecting() {\n\n\n\t\t\tlet selected = _private.cache.filter((child, scope) => {\n\n\t\t\t\tscope = child.scope();\n\n\t\t\t\tif (scope.isSelecting) {\n\n\t\t\t\t\tscope.isSelecting = false;\n\t\t\t\t\tscope.isSelected = (event.ctrlKey || event.metaKey) ? !scope.isSelected : true;\n\t\t\t\t\tscope.$apply();\n\n\t\t\t\t}\n\n\t\t\t\treturn scope.isSelected;\n\n\t\t\t});\n\n\t\t\t_private.methods.update(selected);\n\n\t\t\treturn this;\n\n\t\t}\n\n\n\t\t/**\n\t\t * Устанавливает состояние selectable\n\t\t */\n\t\tset freeze(state) {\n\n\t\t\t_private.data.freeze = state;\n\n\t\t}\n\n\n\t\t/**\n\t\t * Устанавливает конечные координаты хелпера\n\t\t */\n\t\tset rectEndPoint(c) {\n\n\t\t\t_private.data.rect.end = {x: c.x, y: c.y};\n\n\t\t\t_private.methods.rectUpdate();\n\n\t\t\t_private.methods.checkObjects();\n\n\t\t}\n\n\n\t\t/**\n\t\t * Устанавливает начальные координаты хелпера\n\t\t */\n\t\tset rectStartPoint(c) {\n\n\t\t\t_private.data.rect.start = {x: c.x, y: c.y};\n\n\t\t}\n\n\n\t\t/**\n\t\t * Устанавливает по умолчанию зону выделения\n\t\t * для работы с hot keys\n\t\t * @param zone\n\t\t */\n\t\tset defaultZone(zone) {\n\n\t\t\t_private.data.defaultZone = zone;\n\n\t\t}\n\n\n\t\t/**\n\t\t * Кэширует элементы в зоне\n\t\t * @param zone\n\t\t */\n\t\tset zone(zone) {\n\n\t\t\t_private.cache = _private.methods.getSelectableElements(zone);\n\n\t\t}\n\n\n\t\t/**\n\t\t * Получает состояние selectable\n\t\t */\n\t\tget freeze() {\n\n\t\t\treturn _private.data.freeze;\n\n\t\t}\n\n\n\t\t/**\n\t\t * Получает массив выбранных объектов\n\t\t */\n\t\tget selected() {\n\n\t\t\treturn _private.cache.filter(child => child.scope().isSelected);\n\n\t\t}\n\n\n\t}\n\n\n\n\n\n\tvar _private = {\n\n\n\t\t// Объект для хнанения функций callback при выделении элементов;\n\t\tcalbacks: {},\n\n\t\t// Кэш элементов в хоне выделения\n\t\tcache: [],\n\n\t\t// Данные\n\t\tdata: {\n\n\t\t\t// Замороженние состояние\n\t\t\tfreeze : false,\n\n\t\t\t// Зона по умолчанию, для hot keys\n\t\t\tdefaultZone: null,\n\n\t\t\t// Последний выбранный элемент, для hot key Shift\n\t\t\t// TODO сделать обработку кнопки shift;\n\t\t\tlastSelect: null,\n\n\t\t\t// Объект выделения\n\t\t\trect: {\n\t\t\t\telement: null,\n\t\t\t\tstart: {},\n\t\t\t\tend: {}\n\t\t\t}\n\n\t\t},\n\n\n\t\t// Модиффикаторы\n\t\tmodifiers: {\n\t\t\trect: 'ng-selectable__helper'\n\t\t},\n\n\n\t\t// Коды горячих кнопок\n\t\tkeyCode: {\n\t\t\tA: 65,\n\t\t\tESC: 27\n\t\t},\n\n\n\t\t/**\n\t\t *  Приватные методы\n\t\t */\n\t\tmethods: {\n\n\n\t\t\t/*\n\t\t\t * Создает элемент выделения\n\t\t\t */\n\t\t\trectCreate: () => {\n\n\t\t\t\tlet element = angular.element('<div/>').addClass(_private.modifiers.rect);\n\n\t\t\t\t$document.find('body').eq(0).append(element);\n\n\t\t\t\treturn element;\n\n\t\t\t},\n\n\n\t\t\t/*\n\t\t\t * Получает элемент выделения\n\t\t\t */\n\t\t\tgetRect: () => _private.data.rect.elenemt || (_private.data.rect.elenemt = _private.methods.rectCreate()),\n\n\n\t\t\t/*\n\t\t\t * Получает координаты элемент выделения\n\t\t\t */\n\t\t\tgetRectCoord: () => {\n\n\t\t\t\tlet {end, start} = _private.data.rect,\n\t\t\t\t\ttemp = {\n\t\t\t\t\t\tend: {x: end.x, y: end.y},\n\t\t\t\t\t\tstart: {x: start.x, y: start.y}\n\t\t\t\t\t};\n\n\t\t\t\tif (start.x > end.x) {\n\t\t\t\t\t[temp.end.x, temp.start.x] = [start.x, end.x];\n\t\t\t\t}\n\n\t\t\t\tif (start.y > end.y) {\n\t\t\t\t\t[temp.end.y, temp.start.y] = [start.y, end.y];\n\t\t\t\t}\n\n\t\t\t\treturn temp;\n\n\t\t\t},\n\n\n\t\t\t/*\n\t\t\t * Обновляет положение хелпера\n\t\t\t */\n\t\t\trectUpdate: () => {\n\n\t\t\t\tlet {start, end} = _private.methods.getRectCoord();\n\n\t\t\t\t_private.methods.getRect().css({\n\t\t\t\t\t\"top\": start.y + \"px\",\n\t\t\t\t\t\"left\": start.x + \"px\",\n\t\t\t\t\t\"width\": (end.x - start.x) + \"px\",\n\t\t\t\t\t\"height\": (end.y - start.y) + \"px\"\n\t\t\t\t});\n\n\t\t\t},\n\n\n\t\t\t/*\n\t\t\t * Получает положение объекта\n\t\t\t *\n\t\t\t * @param element\n\t\t\t * @returns {{top: number, left: number}}\n\t\t\t */\n\t\t\toffset: element => {\n\n\t\t\t\tlet doc = element && element.ownerDocument,\n\t\t\t\t\tdocumentElem = doc.documentElement,\n\t\t\t\t\tbox = (element.getBoundingClientRect) ? element.getBoundingClientRect() : {top: 0, left: 0};\n\n\n\t\t\t\treturn ({\n\t\t\t\t\ttop: box.top + (window.pageYOffset || documentElem.scrollTop) - (documentElem.clientTop || 0),\n\t\t\t\t\tleft: box.left + (window.pageXOffset || documentElem.scrollLeft) - (documentElem.clientLeft || 0)\n\t\t\t\t});\n\n\t\t\t},\n\n\n\t\t\t/*\n\t\t\t * Обновляет состояние элементов\n\t\t\t */\n\t\t\tchangeState: (elements = [], state = false, update = false) => {\n\n\t\t\t\telements = (elements === 'all') ? _private.cache : elements;\n\n\n\t\t\t\telements.forEach((child, scope) => {\n\n\t\t\t\t\tscope = child.scope();\n\n\t\t\t\t\tif (scope.isSelected != state) {\n\t\t\t\t\t\tscope.isSelecting = false;\n\t\t\t\t\t\tscope.isSelected = state;\n\t\t\t\t\t\tscope.$apply();\n\t\t\t\t\t}\n\n\t\t\t\t});\n\n\n\t\t\t\tif (update) {\n\n\t\t\t\t\t_private.methods.update(state ? _private.cache : []);\n\n\t\t\t\t}\n\n\n\t\t\t},\n\n\n\t\t\t/*\n\t\t\t * Вызывает все подписанные callbacks на обновления\n\t\t\t */\n\t\t\tupdate: selected => {\n\n\t\t\t\tfor (let k in _private.calbacks) _private.calbacks[k](selected);\n\n\t\t\t},\n\n\n\t\t\t/*\n\t\t\t * Проверяет попадание объекта в область выделения\n\t\t\t *\n\t\t\t * @param {Object} object\n\t\t\t * @returns {Boolean}\n\t\t\t */\n\t\t\tcheckHit: object => {\n\n\t\t\t\tlet hel = _private.methods.getRectCoord(),\n\t\t\t\t\tobjectOffset = _private.methods.offset(object[0]),\n\t\t\t\t\tobj = {\n\t\t\t\t\t\tstart: {\n\t\t\t\t\t\t\tx: objectOffset.left,\n\t\t\t\t\t\t\ty: objectOffset.top\n\t\t\t\t\t\t},\n\t\t\t\t\t\tend: {\n\t\t\t\t\t\t\tx: objectOffset.left + object.prop('offsetWidth'),\n\t\t\t\t\t\t\ty: objectOffset.top + object.prop('offsetHeight')\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\treturn ( hel.start.x <= obj.start.x && obj.start.x <= hel.end.x || obj.start.x <= hel.start.x && hel.start.x <= obj.end.x) &&\n\t\t\t\t\t(hel.start.y <= obj.start.y && obj.start.y <= hel.end.y || obj.start.y <= hel.start.y && hel.start.y <= obj.end.y);\n\n\t\t\t},\n\n\n\t\t\tgetSelectableElements: element => {\n\n\t\t\t\tvar out = [];\n\n\t\t\t\tArray.prototype.slice.call(element.children())\n\t\t\t\t\t.filter((child, scope) => {\n\n\t\t\t\t\t\tchild = angular.element(child);\n\t\t\t\t\t\tscope = child.scope();\n\n\t\t\t\t\t\tif (scope.isSelectable) {\n\t\t\t\t\t\t\tscope.unSelect = false;\n\t\t\t\t\t\t\tout.push(child);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t//TODO переписать\n\t\t\t\t\t\t\tif (scope.$id != element.scope().$id && scope.isSelectableZone === true) {\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse out = out.concat(_private.methods.getSelectableElements(child));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t});\n\n\t\t\t\treturn out;\n\n\t\t\t},\n\n\n\t\t\tcheckObjects: () => {\n\n\t\t\t\t_private.cache\n\t\t\t\t\t.forEach((child, scope) => {\n\n\t\t\t\t\t\tlet hit = _private.methods.checkHit(child);\n\t\t\t\t\t\tscope = child.scope();\n\n\n\t\t\t\t\t\tif (hit && scope.isSelected) {\n\n\t\t\t\t\t\t\tscope.isSelected = false;\n\t\t\t\t\t\t\tscope.isSelecting = false;\n\t\t\t\t\t\t\tscope.unSelect = true;\n\t\t\t\t\t\t\tscope.$apply();\n\n\t\t\t\t\t\t} else if (hit && !scope.unSelect) {\n\n\t\t\t\t\t\t\tif (!scope.isSelecting) {\n\t\t\t\t\t\t\t\tscope.isSelecting = true;\n\t\t\t\t\t\t\t\tscope.$apply();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else if (!hit && scope.unSelect) {\n\n\t\t\t\t\t\t\tscope.unSelect = false;\n\t\t\t\t\t\t\tscope.isSelected = true;\n\t\t\t\t\t\t\tscope.$apply();\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (scope.isSelecting) {\n\n\t\t\t\t\t\t\tscope.isSelecting = false;\n\t\t\t\t\t\t\tscope.$apply();\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t});\n\n\t\t\t}\n\n\n\t\t},\n\n\n\t\t/**\n\t\t * Обработка событий\n\t\t */\n\t\tevents: {\n\n\n\t\t\tkeyDown: event => {\n\n\t\t\t\t// Если не существует зона по умолчанию или фокус на элементе формы, то отменяем;\n\t\t\t\tif (!_private.data.defaultZone || event.target.formTarget != undefined) return;\n\n\t\t\t\t_private.cache = _private.methods.getSelectableElements(_private.data.defaultZone);\n\n\t\t\t\tif (!_private.cache.length) return;\n\n\n\t\t\t\tif (event.keyCode === _private.keyCode.ESC) {\n\n\t\t\t\t\t_private.methods.changeState('all', false, true);\n\n\t\t\t\t\treturn event.preventDefault();\n\t\t\t\t}\n\n\n\t\t\t\tif (event.keyCode === _private.keyCode.A && (event.ctrlKey || event.metaKey)) {\n\n\t\t\t\t\t_private.methods.changeState('all', true, true);\n\n\t\t\t\t\treturn event.preventDefault();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t}\n\n\t};\n\n\n\n\treturn new Selectable;\n\n\n};\n\n\nmodule.exports.$inject = [\n\t'$document'\n];\n\n\n/** WEBPACK FOOTER **\n ** ./src/services/Selectable.js\n **/","'use strict';\n\n\nexport default  ($document, Selectable) => {\n\n\treturn {\n\n\t\tscope: true,\n\t\trestrict: 'A',\n\t\tlink: (scope, element, attributes) => {\n\n\t\t\tscope.isSelectableZone = true;\n\n\n\t\t\t/**\n\t\t\t * Method on Mouse Move\n\t\t\t * @param  {Event} event\n\t\t\t */\n\t\t\tfunction mousemove(event) {\n\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tSelectable.rectEndPoint = {x: event.pageX, y: event.pageY};\n\n\t\t\t}\n\n\n\t\t\t/**\n\t\t\t * Event on Mouse up\n\t\t\t * @param  {Event} event\n\t\t\t */\n\t\t\tfunction mouseup(event) {\n\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tSelectable\n\t\t\t\t\t.selectSelecting()\n\t\t\t\t\t.rectReset();\n\n\n\t\t\t\t// Remove listeners\n\t\t\t\t$document.off('mousemove', mousemove);\n\t\t\t\t$document.off('mouseup', mouseup);\n\n\t\t\t}\n\n\n\t\t\telement.on('mousedown', event => {\n\n\t\t\t\tif( Selectable.freeze == 'one' ) Selectable.freeze = false;\n\t\t\t\telse if( !Selectable.freeze && event.target.formTarget == undefined){\n\n\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\tSelectable.zone = element;\n\n\t\t\t\t\tif (!(event.ctrlKey || event.metaKey)) Selectable.changeState('all', false, false);\n\n\t\t\t\t\t// Update start coordinates\n\t\t\t\t\tSelectable.rectStartPoint = {x: event.pageX, y: event.pageY};\n\n\t\t\t\t\t// Set events\n\t\t\t\t\t$document.on('mousemove', mousemove);\n\t\t\t\t\t$document.on('mouseup', mouseup);\n\n\t\t\t\t\tdocument.activeElement && document.activeElement.blur();\n\n\t\t\t\t}\n\n\n\t\t\t});\n\n\n\t\t}\n\t};\n\n\n}\n\n\nmodule.exports.$inject = [\n\t'$document',\n\t'Selectable'\n];\n\n\n/** WEBPACK FOOTER **\n ** ./src/directives/selectable.js\n **/","'use strict';\n\n\nexport default Selectable => {\n\n\treturn {\n\n\t\tscope: true,\n\t\trestrict: 'A',\n\t\tlink: (scope, element, attributes) => {\n\n\t\t\tscope.isSelectable = true;\n\t\t\tscope.isSelecting  = false;\n\t\t\tscope.isSelected   = false;\n\n\t\t\telement.on('mousedown', event => {\n\n\n\t\t\t\tif( event.target.formTarget != undefined ) return;\n\n\t\t\t\tSelectable.zone = element.parent();\n\n\n\t\t\t\tif (!event.ctrlKey && !event.metaKey) Selectable.changeState('all', false, false);\n\n\n\t\t\t\telement.scope().isSelected = !element.scope().isSelected;\n\t\t\t\telement.scope().$apply();\n\n\t\t\t\tSelectable.update( Selectable.selected );\n\n\t\t\t\tevent.stopPropagation();\n\n\n\t\t\t});\n\n\t\t}\n\t};\n\n\n}\n\n\nmodule.exports.$inject = [\n\t'Selectable'\n];\n\n\n/** WEBPACK FOOTER **\n ** ./src/directives/selectableItem.js\n **/","'use strict';\n\n\nexport default Selectable => {\n\n\treturn {\n\n\t\tlink: (scope, element, attributes) => {\n\n\t\t\telement.on('mousedown', () => Selectable.freeze = 'one' );\n\n\t\t}\n\t};\n\n}\n\n\nmodule.exports.$inject = [\n\t'Selectable'\n];\n\n\n/** WEBPACK FOOTER **\n ** ./src/directives/selectableIgnore.js\n **/","'use strict';\n\n\nexport default Selectable => {\n\n\n\treturn {\n\n\t\tlink: (scope, element, attributes) => Selectable.defaultZone = element\n\n\t};\n\n\n}\n\n\nmodule.exports.$inject = [\n\t'Selectable'\n];\n\n\n/** WEBPACK FOOTER **\n ** ./src/directives/selectableHotkey.js\n **/"],"sourceRoot":""}