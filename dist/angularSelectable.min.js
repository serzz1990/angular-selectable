!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.angularSelectable=t():e.angularSelectable=t()}(this,function(){return function(e){function t(c){if(n[c])return n[c].exports;var r=n[c]={exports:{},id:c,loaded:!1};return e[c].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var c=function(e){return e&&e.__esModule?e["default"]:e},r=c(n(1)),o=c(n(2)),a=c(n(3)),i=c(n(4)),l=c(n(5));angular.module("angularSelectable",[]).service("Selectable",r).directive("selectable",o).directive("selectableItem",a).directive("selectableIgnore",i).directive("selectableHotkey",l)},function(e,t){"use strict";var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var n,c=[],r=e[Symbol.iterator]();!(n=r.next()).done&&(c.push(n.value),!t||c.length!==t););return c}throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=function(){function e(e,t){for(var n in t){var c=t[n];c.configurable=!0,c.value&&(c.writable=!0)}Object.defineProperties(e,t)}return function(t,n,c){return n&&e(t.prototype,n),c&&e(t,c),t}}(),r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};e.exports=function(e){var t=function(){function t(){r(this,t),this.listen()}return c(t,{listen:{value:function(){return e.on("keydown",o.events.keyDown),this}},addListener:{value:function(e,t){"function"==typeof t&&(o.calbacks[e]=t)}},update:{value:function(e){return o.methods.update(e),this}},rectReset:{value:function(){return o.methods.getRect().css({top:"-2px",left:"-2px",width:0,height:0}),this}},changeState:{value:function(e,t,n){return o.methods.changeState(e,t,n),this}},checkObjects:{value:function(){return o.methods.checkObjects(),this}},selectSelecting:{value:function(){var e=o.cache.filter(function(e,t){return t=e.scope(),t.isSelecting&&(t.isSelecting=!1,t.isSelected=event.ctrlKey||event.metaKey?!t.isSelected:!0,t.$apply()),t.isSelected});return o.methods.update(e),this}},freeze:{set:function(e){o.data.freeze=e},get:function(){return o.data.freeze}},rectEndPoint:{set:function(e){o.data.rect.end={x:e.x,y:e.y},o.methods.rectUpdate(),o.methods.checkObjects()}},rectStartPoint:{set:function(e){o.data.rect.start={x:e.x,y:e.y}}},defaultZone:{set:function(e){o.data.defaultZone=e}},zone:{set:function(e){o.cache=o.methods.getSelectableElements(e)}},selected:{get:function(){return o.cache.filter(function(e){return e.scope().isSelected})}}}),t}(),o={calbacks:{},cache:[],data:{freeze:!1,defaultZone:null,lastSelect:null,rect:{element:null,start:{},end:{}}},modifiers:{rect:"ng-selectable__helper"},keyCode:{A:65,ESC:27},methods:{rectCreate:function(){var t=angular.element("<div/>").addClass(o.modifiers.rect);return e.find("body").eq(0).append(t),t},getRect:function(){return o.data.rect.elenemt||(o.data.rect.elenemt=o.methods.rectCreate())},getRectCoord:function(){var e=o.data.rect,t=e.end,c=e.start,r={end:{x:t.x,y:t.y},start:{x:c.x,y:c.y}};if(c.x>t.x){var a=[c.x,t.x],i=n(a,2);r.end.x=i[0],r.start.x=i[1]}if(c.y>t.y){var l=[c.y,t.y],s=n(l,2);r.end.y=s[0],r.start.y=s[1]}return r},rectUpdate:function(){var e=o.methods.getRectCoord(),t=e.start,n=e.end;o.methods.getRect().css({top:t.y+"px",left:t.x+"px",width:n.x-t.x+"px",height:n.y-t.y+"px"})},offset:function(e){var t=e&&e.ownerDocument,n=t.documentElement,c=e.getBoundingClientRect?e.getBoundingClientRect():{top:0,left:0};return{top:c.top+(window.pageYOffset||n.scrollTop)-(n.clientTop||0),left:c.left+(window.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}},changeState:function(){var e=void 0===arguments[0]?[]:arguments[0],t=void 0===arguments[1]?!1:arguments[1],n=void 0===arguments[2]?!1:arguments[2];e="all"===e?o.cache:e,e.forEach(function(e,n){n=e.scope(),n.isSelected!=t&&(n.isSelecting=!1,n.isSelected=t,n.$apply())}),n&&o.methods.update(t?o.cache:[])},update:function(e){for(var t in o.calbacks)o.calbacks[t](e)},checkHit:function(e){var t=o.methods.getRectCoord(),n=o.methods.offset(e[0]),c={start:{x:n.left,y:n.top},end:{x:n.left+e.prop("offsetWidth"),y:n.top+e.prop("offsetHeight")}};return(t.start.x<=c.start.x&&c.start.x<=t.end.x||c.start.x<=t.start.x&&t.start.x<=c.end.x)&&(t.start.y<=c.start.y&&c.start.y<=t.end.y||c.start.y<=t.start.y&&t.start.y<=c.end.y)},getSelectableElements:function(e){var t=[];return Array.prototype.slice.call(e.children()).filter(function(n,c){n=angular.element(n),c=n.scope(),c.isSelectable?(c.unSelect=!1,t.push(n)):c.$id!=e.scope().$id&&c.isSelectableZone===!0||(t=t.concat(o.methods.getSelectableElements(n)))}),t},checkObjects:function(){o.cache.forEach(function(e,t){var n=o.methods.checkHit(e);t=e.scope(),n&&t.isSelected?(t.isSelected=!1,t.isSelecting=!1,t.unSelect=!0,t.$apply()):n&&!t.unSelect?t.isSelecting||(t.isSelecting=!0,t.$apply()):!n&&t.unSelect?(t.unSelect=!1,t.isSelected=!0,t.$apply()):t.isSelecting&&(t.isSelecting=!1,t.$apply())})}},events:{keyDown:function(e){return o.data.defaultZone&&void 0==e.target.formTarget&&(o.cache=o.methods.getSelectableElements(o.data.defaultZone),o.cache.length)?e.keyCode===o.keyCode.ESC?(o.methods.changeState("all",!1,!0),e.preventDefault()):e.keyCode===o.keyCode.A&&(e.ctrlKey||e.metaKey)?(o.methods.changeState("all",!0,!0),e.preventDefault()):void 0:void 0}}};return new t},e.exports.$inject=["$document"]},function(e,t){"use strict";e.exports=function(e,t){return{scope:!0,restrict:"A",link:function(n,c,r){function o(e){e.preventDefault(),t.rectEndPoint={x:e.pageX,y:e.pageY}}function a(n){n.preventDefault(),t.selectSelecting().rectReset(),e.off("mousemove",o),e.off("mouseup",a)}n.isSelectableZone=!0,c.on("mousedown",function(n){"one"==t.freeze?t.freeze=!1:t.freeze||void 0!=n.target.formTarget||(n.preventDefault(),t.zone=c,n.ctrlKey||n.metaKey||t.changeState("all",!1,!1),t.rectStartPoint={x:n.pageX,y:n.pageY},e.on("mousemove",o),e.on("mouseup",a),document.activeElement&&document.activeElement.blur())})}}},e.exports.$inject=["$document","Selectable"]},function(e,t){"use strict";e.exports=function(e){return{scope:!0,restrict:"A",link:function(t,n,c){t.isSelectable=!0,t.isSelecting=!1,t.isSelected=!1,n.on("mousedown",function(t){void 0==t.target.formTarget&&(e.zone=n.parent(),t.ctrlKey||t.metaKey||e.changeState("all",!1,!1),n.scope().isSelected=!n.scope().isSelected,n.scope().$apply(),e.update(e.selected),t.stopPropagation())})}}},e.exports.$inject=["Selectable"]},function(e,t){"use strict";e.exports=function(e){return{link:function(t,n,c){n.on("mousedown",function(){return e.freeze="one"})}}},e.exports.$inject=["Selectable"]},function(e,t){"use strict";e.exports=function(e){return{link:function(t,n,c){return e.defaultZone=n}}},e.exports.$inject=["Selectable"]}])});
//# sourceMappingURL=angularSelectable.min.js.map