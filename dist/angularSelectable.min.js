!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.angularSelectable=t():e.angularSelectable=t()}(this,function(){return function(e){function t(c){if(n[c])return n[c].exports;var o=n[c]={exports:{},id:c,loaded:!1};return e[c].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var c=function(e){return e&&e.__esModule?e["default"]:e},o=c(n(1)),r=c(n(2)),a=c(n(3)),i=c(n(4)),l=c(n(5)),s=c(n(6)),u=c(n(7));angular.module("angularSelectable",[]).service("Selectable",o).directive("selectable",r).directive("selectableMouseZone",a).directive("selectableItem",i).directive("selectableIgnore",l).directive("selectableHotkey",s).directive("selectableSelectAll",u)},function(e,t){"use strict";var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var n,c=[],o=e[Symbol.iterator]();!(n=o.next()).done&&(c.push(n.value),!t||c.length!==t););return c}throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=function(){function e(e,t){for(var n in t){var c=t[n];c.configurable=!0,c.value&&(c.writable=!0)}Object.defineProperties(e,t)}return function(t,n,c){return n&&e(t.prototype,n),c&&e(t,c),t}}(),o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};e.exports=function(e){var t=function(){function t(){o(this,t),this.listen()}return c(t,{listen:{value:function(){return e.on("keydown",r.events.keyDown),this}},addListener:{value:function(e,t){"function"==typeof t&&(r.calbacks[e]=t)}},update:{value:function(e){return r.methods.update(e),this}},rectReset:{value:function(){return r.methods.getRect().css({top:"-2px",left:"-2px",width:0,height:0}),this}},changeState:{value:function(e,t,n){return r.methods.changeState(e,t,n),this}},findZone:{value:function(e){return e&&e.length?e.data().isSelectableZone?e:this.findZone(e.parent()):!1}},checkObjects:{value:function(){return r.methods.checkObjects(),this}},selectSelecting:{value:function(){var e=r.cache.filter(function(e,t){return t=e.scope(),t.isSelecting&&(t.isSelecting=!1,t.isSelected=event.ctrlKey||event.metaKey?!t.isSelected:!0,t.$apply()),t.isSelected});return r.methods.update(e),this}},freeze:{set:function(e){r.data.freeze=e},get:function(){return r.data.freeze}},rectEndPoint:{set:function(e){r.data.rect.end={x:e.x,y:e.y},r.methods.rectUpdate(),r.methods.checkObjects()}},rectStartPoint:{set:function(e){r.data.rect.start={x:e.x,y:e.y}}},defaultZone:{set:function(e){r.data.defaultZone=e}},zone:{set:function(e){r.zone=e,r.cache=r.methods.getSelectableElements(e)}},selected:{get:function(){return r.cache.filter(function(e){return e.scope().isSelected})}}}),t}(),r={calbacks:{},cache:[],data:{freeze:!1,defaultZone:null,lastSelect:null,rect:{element:null,start:{},end:{}}},modifiers:{rect:"ng-selectable__helper"},keyCode:{A:65,ESC:27},methods:{rectCreate:function(){var t=angular.element("<div/>").addClass(r.modifiers.rect);return e.find("body").eq(0).append(t),t},getRect:function(){return r.data.rect.elenemt||(r.data.rect.elenemt=r.methods.rectCreate())},getRectCoord:function(){var e=r.data.rect,t=e.end,c=e.start,o={end:{x:t.x,y:t.y},start:{x:c.x,y:c.y}};if(c.x>t.x){var a=[c.x,t.x],i=n(a,2);o.end.x=i[0],o.start.x=i[1]}if(c.y>t.y){var l=[c.y,t.y],s=n(l,2);o.end.y=s[0],o.start.y=s[1]}return o},rectUpdate:function(){var e=r.methods.getRectCoord(),t=e.start,n=e.end;r.methods.getRect().css({top:t.y+"px",left:t.x+"px",width:n.x-t.x+"px",height:n.y-t.y+"px"})},offset:function(e){var t=e&&e.ownerDocument,n=t.documentElement,c=e.getBoundingClientRect?e.getBoundingClientRect():{top:0,left:0};return{top:c.top+(window.pageYOffset||n.scrollTop)-(n.clientTop||0),left:c.left+(window.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}},changeState:function(){var e=void 0===arguments[0]?[]:arguments[0],t=void 0===arguments[1]?!1:arguments[1],n=void 0===arguments[2]?!1:arguments[2];e="all"===e?r.cache:e,e.forEach(function(e,n){n=e.scope(),n.isSelected!=t&&(n.isSelecting=!1,n.isSelected=t,n.$apply())}),n&&r.methods.update(t?r.cache:[])},update:function(e){for(var t in r.calbacks)r.calbacks[t](r.zone,r.zone.attr("selectable")||"noname",e,r.cache);r.zone.triggerHandler("update",[e,r.cache])},checkHit:function(e){var t=r.methods.getRectCoord(),n=r.methods.offset(e[0]),c={start:{x:n.left,y:n.top},end:{x:n.left+e.prop("offsetWidth"),y:n.top+e.prop("offsetHeight")}};return(t.start.x<=c.start.x&&c.start.x<=t.end.x||c.start.x<=t.start.x&&t.start.x<=c.end.x)&&(t.start.y<=c.start.y&&c.start.y<=t.end.y||c.start.y<=t.start.y&&t.start.y<=c.end.y)},getSelectableElements:function(e){var t=[];return Array.prototype.slice.call(e.children()).filter(function(n,c){n=angular.element(n),c=n.scope(),c.isSelectable?(c.unSelect=!1,t.push(n)):c.$id!=e.scope().$id&&c.isSelectableZone===!0||(t=t.concat(r.methods.getSelectableElements(n)))}),t},checkObjects:function(){r.cache.forEach(function(e,t){var n=r.methods.checkHit(e);t=e.scope(),n&&t.isSelected?(t.isSelected=!1,t.isSelecting=!1,t.unSelect=!0,t.$apply()):n&&!t.unSelect?t.isSelecting||(t.isSelecting=!0,t.$apply()):!n&&t.unSelect?(t.unSelect=!1,t.isSelected=!0,t.$apply()):t.isSelecting&&(t.isSelecting=!1,t.$apply())})}},events:{keyDown:function(e){return r.data.defaultZone&&void 0==e.target.formTarget&&(r.cache=r.methods.getSelectableElements(r.data.defaultZone),r.cache.length)?e.keyCode===r.keyCode.ESC?(r.methods.changeState("all",!1,!0),e.preventDefault()):e.keyCode===r.keyCode.A&&(e.ctrlKey||e.metaKey)?(r.methods.changeState("all",!0,!0),e.preventDefault()):void 0:void 0}}};return new t},e.exports.$inject=["$document"]},function(e,t){"use strict";e.exports=function(e,t){return{scope:!0,restrict:"A",link:function(e,t,n){e.isSelectableZone=!0,t.data("isSelectableZone",!0)}}},e.exports.$inject=["$document","Selectable"]},function(e,t){"use strict";e.exports=function(e,t){return{scope:!0,restrict:"A",link:function(n,c,o){function r(e){e.preventDefault(),t.rectEndPoint={x:e.pageX,y:e.pageY}}function a(n){n.preventDefault(),t.selectSelecting().rectReset(),e.off("mousemove",r),e.off("mouseup",a)}c.on("mousedown",function(n){"one"==t.freeze?t.freeze=!1:t.freeze||void 0!=n.target.formTarget||(n.preventDefault(),t.zone=c,n.ctrlKey||n.metaKey||t.changeState("all",!1,!1),t.rectStartPoint={x:n.pageX,y:n.pageY},e.on("mousemove",r),e.on("mouseup",a),document.activeElement&&document.activeElement.blur())})}}},e.exports.$inject=["$document","Selectable"]},function(e,t){"use strict";e.exports=function(e,t){return{scope:!0,restrict:"A",link:function(n,c,o){n.isSelectable=!0,n.isSelecting=!1,n.isSelected=!1,c.on("mousedown",function(n){return e.zone=e.findZone(c),void 0!=n.target.formTarget?t(function(){return e.selectSelecting()},50):(n.ctrlKey||n.metaKey||e.changeState("all",!1,!1),c.scope().isSelected=!c.scope().isSelected,c.scope().$apply(),e.update(e.selected),void n.stopPropagation())})}}},e.exports.$inject=["Selectable","$timeout"]},function(e,t){"use strict";e.exports=function(e){return{link:function(t,n,c){n.on("mousedown",function(){return e.freeze="one"})}}},e.exports.$inject=["Selectable"]},function(e,t){"use strict";e.exports=function(e){return{link:function(t,n,c){return e.defaultZone=n}}},e.exports.$inject=["Selectable"]},function(e,t){"use strict";e.exports=function(e,t){return{scope:!0,restrict:"A",link:function(n,c,o){var r;t(function(){r=e.findZone(c),r&&r.on("update",function(e,t,n){c[0].checked=t.length==n.length})},100),c.on("change",function(t){r&&(e.zone=r,e.changeState("all",t.target.checked,!0))})}}},e.exports.$inject=["Selectable","$timeout"]}])});
//# sourceMappingURL=angularSelectable.min.js.map